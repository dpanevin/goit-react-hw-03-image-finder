{"version":3,"sources":["components/ImageFinder/LoadMoreButton/LoadMoreButton.jsx","components/ImageFinder/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageFinder/ImageGallery/ImageGallery.jsx","utils/ImagesApi.js","components/ImageFinder/Searchbar/Searchbar.jsx","components/ImageFinder/Modal/Modal.jsx","components/ImageFinder/ImageFinder.jsx","components/App/App.jsx","index.js"],"names":["LoadMoreButton","type","className","onClick","this","props","Component","ImageGalleryItem","state","imageUrl","largeImageUrl","tags","openModal","setState","src","alt","ImageGallery","images","onMoreBtnClick","map","id","webformatURL","largeImageURL","length","ImagesApi","searchQuery","page","a","url","fetch","response","json","console","log","newQuery","Searchbar","query","onChange","e","target","value","handleSubmit","preventDefault","trim","onSubmit","toast","error","autoComplete","autoFocus","placeholder","modalRoot","document","querySelector","Modal","handleKeyDown","code","closeModal","OverlayClick","currentTarget","window","addEventListener","removeEventListener","data","createPortal","imagesApi","ImageFinder","status","modalData","fetchImagesApi","fetchImages","hits","resetPage","incrementPage","prevState","scrollTo","top","documentElement","scrollHeight","behavior","color","height","width","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b15456b4.chunk.js","sourcesContent":["import { Component } from 'react';\n\nexport class LoadMoreButton extends Component {\n  render() {\n    return (\n      <button type=\"button\" className=\"Button\" onClick={this.props.onClick}>\n        Загрузить ещё\n      </button>\n    );\n  }\n}\n","import { Component } from 'react';\n\nexport class ImageGalleryItem extends Component {\n  state = {\n    imageUrl: '',\n    largeImageUrl: '',\n    tags: '',\n  };\n\n  componentDidMount() {\n    const { imageUrl, largeImageUrl, tags } = this.props;\n    this.setState({ imageUrl, largeImageUrl, tags });\n  }\n\n  onClick = () => {\n    const { openModal } = this.props;\n    const { largeImageUrl, tags } = this.state;\n\n    openModal(largeImageUrl, tags);\n  };\n\n  render() {\n    const { imageUrl, tags } = this.state;\n\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          onClick={this.onClick}\n          src={imageUrl}\n          alt={tags}\n          className=\"ImageGalleryItem-image\"\n        />\n      </li>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { LoadMoreButton } from '../LoadMoreButton/LoadMoreButton';\nimport { ImageGalleryItem } from './ImageGalleryItem/ImageGalleryItem';\n\nexport class ImageGallery extends Component {\n  render() {\n    const { images, onMoreBtnClick, openModal } = this.props;\n    return (\n      <>\n        <ul className=\"ImageGallery\">\n          {images.map(({ id, webformatURL, largeImageURL, tags }) => {\n            return (\n              <ImageGalleryItem\n                key={id}\n                imageUrl={webformatURL}\n                largeImageUrl={largeImageURL}\n                tags={tags}\n                openModal={openModal}\n              />\n            );\n          })}\n        </ul>\n        {images.length !== 0 && <LoadMoreButton onClick={onMoreBtnClick} />}\n      </>\n    );\n  }\n}\n","const BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '21824678-226458aab3f184645846eee2a';\n\nexport default class ImagesApi {\n  constructor() {\n    this.searchQuery = 'cat';\n    this.page = 1;\n  }\n\n  async fetchImages() {\n    const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuery}&per_page=12&page=${this.page}&key=${API_KEY}`;\n\n    try {\n      const response = await fetch(url);\n      const images = await response.json();\n      return images;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import { Component } from 'react';\nimport toast, { Toaster } from 'react-hot-toast';\n\nexport class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  onChange = e => {\n    this.setState({ query: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Введите поисковый запрос.');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Поиск изображений и фото\"\n            onChange={this.onChange}\n            value={this.state.query}\n          />\n        </form>\n        <Toaster />\n      </header>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport class Modal extends Component {\n  state = {\n    url: null,\n    tags: null,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.closeModal();\n    }\n  };\n\n  OverlayClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.closeModal();\n    }\n  };\n\n  render() {\n    const { url, tags } = this.props.data;\n\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.OverlayClick}>\n        <div className=\"Modal\">\n          <img src={url} alt={tags} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport { ImageGallery } from './ImageGallery/ImageGallery';\nimport ImagesApi from 'utils/ImagesApi';\nimport { Searchbar } from './Searchbar/Searchbar';\nimport { Modal } from './Modal/Modal';\n\nconst imagesApi = new ImagesApi();\n\nexport class ImageFinder extends Component {\n  state = {\n    images: [],\n    status: 'idle',\n    modalData: null,\n  };\n\n  fetchImagesApi = async () => {\n    this.setState({ status: 'pending' });\n\n    const response = await imagesApi.fetchImages();\n    this.setState({ status: 'resloved' });\n    return response.hits;\n  };\n\n  onSubmit = async query => {\n    imagesApi.resetPage();\n    imagesApi.query = query;\n\n    const images = await this.fetchImagesApi();\n    this.setState({ images });\n  };\n\n  onMoreBtnClick = async () => {\n    imagesApi.incrementPage();\n\n    const images = await this.fetchImagesApi();\n    this.setState(prevState => ({ images: [...prevState.images, ...images] }));\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  openModal = (url, tags) => {\n    this.setState({ modalData: { url, tags } });\n  };\n\n  closeModal = () => {\n    this.setState({ modalData: null });\n  };\n\n  render() {\n    const { images, status, modalData } = this.state;\n    console.log(status);\n\n    return (\n      <>\n        <Searchbar onSubmit={this.onSubmit} />\n        <ImageGallery\n          images={images}\n          onMoreBtnClick={this.onMoreBtnClick}\n          openModal={this.openModal}\n        />\n        {status === 'pending' && (\n          <Loader\n            className=\"Loader\"\n            type=\"Oval\"\n            color=\"rgb(0, 224, 217)\"\n            height={100}\n            width={100}\n          />\n        )}\n\n        {modalData && <Modal data={modalData} closeModal={this.closeModal} />}\n      </>\n    );\n\n    // if (status === 'idle') {\n    //     return (\n    //         <>\n    //     <Searchbar onSubmit={this.onSubmit} />\n    //     <Loader\n    //         type=\"TailSpin\"\n    //         color=\"#00BFFF\"\n    //         height={100}\n    //         width={100}\n    //     />\n    //             </>);\n\n    // };\n\n    // if (status === 'resloved') {\n    //     return (\n    //         <>\n    //             <Searchbar onSubmit={this.onSubmit} />\n\n    //             <ImageGallery images={images} />\n    //             { images.length !== 0 && <LoadMoreButton onClick={this.onMoreBtnClick} />}\n    //         </>\n    //     )\n    // };\n  }\n}\n","import { ImageFinder } from 'components/ImageFinder/ImageFinder';\n\nexport function App() {\n  return (\n    <>\n      <ImageFinder />\n    </>\n  );\n}\n","import 'index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from 'components/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}